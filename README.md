![Moleculer logo](http://moleculer.services/images/banner.png)

# moleculer-db-adapter-cloud-firestore [![NPM version](https://img.shields.io/npm/v/moleculer-db-adapter-cloud-firestore.svg)](https://www.npmjs.com/package/moleculer-db-adapter-cloud-firestore)

MongoDB native adapter for Moleculer DB service.
Cloud Firestore adapter and service mixin for Moleculer DB service, written in the 'spirit' of `moleculer-db` and its adapters

## Install

```bash
$ npm install moleculer-db-adapter-cloud-firestore --save
```

## Usage

```js
"use strict";

const { ServiceBroker } = require("moleculer");
const {
  dbServiceMixin,
  FirestoreAdapter,
} = require("moleculer-db-adapter-cloud-firestore");

const broker = new ServiceBroker();

// Create a Firestore service for `posts` collection
broker.createService({
  name: "posts",
  mixins: [dbServiceMixin],
  adapter: new FirestoreAdapter(
    "insert your 'apiKey' here",
    "insert your 'projectId' here"
  ),
  collection: "posts",
});

broker
  .start()
  .then(async () => {
    const documentCreatedWithProvidedId = await broker.call("users.create", {
      doc: {
        _id: "customId",
        title: "a new adapter has been introduced... is it any good?",
        likes: 42,
      },
    });

    const documentCreatedWithAutoGeneratedUuid = await broker.call(
      "users.create",
      {
        doc: {
          // _id: "customId",
          title: "nice!",
          likes: 69,
        },
      }
    );

    const documentFoundById = await broker.call("users.get", {
      id: "customId",
    });

    const documentsFoundByConditionsWithLimit = await broker.call(
      "users.find",
      {
        conditions: [["likes", "==", 69]],
        limit: 5,
      }
    );

    const updatedDocuemnt = await broker.call("users.update", {
      id: "customId",
      values: {
        title:
          "a new adapter has been introduced... is it any good? the answer is 'true'",
      },
    });

    const deletedDocument = await broker.call("users.delete", {
      id: "customId",
    });
  })
  .catch((err) => console.log("err", err));
```

# License

The project is available under the [MIT license](https://tldrlegal.com/license/mit-license).
